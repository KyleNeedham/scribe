(function(){!function(a,b){return"function"==typeof define&&define.amd?define(["underscore"],function(c){return b(a,c)}):a.Scribe=b(a,a._)}(this,function(a,b){var c;return c=function(){function a(a,b){this.translations=a,this.placeholder=null!=b?b:":"}return a.prototype.has=function(a){return this.get(a)!==a},a.prototype.get=function(a,b){var c;return null==b&&(b={}),c=this.makeReplacements(this.getLine(a),b)||a},a.prototype.getLine=function(a){return b.reduce(a.split("."),function(a,b){return null!=a?a[b]:void 0},this.translations)},a.prototype.makeReplacements=function(a,c){return a?(c=this.sortReplacements(c),b.each(c,function(c,d){return a=b.isArray(c)?b.reduce(c,function(a){return function(b,c){return b.replace(""+a.placeholder+d,c)}}(this),a):a.replace(new RegExp(""+this.placeholder+d,"g"),c)},this),a):void 0},a.prototype.sortReplacements=function(a){var c;return c={},b.chain(a).keys().sortBy(function(a){return-1*a.length}).each(function(b){return c[b]=a[b]}),c},a}()})}).call(this);